<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	

	<script>
		// ES5不允许在代码块中定义函数，出于向后兼容的考虑，浏览器对该规定的实现非常有限。
		// ES6允许在代码块中定义函数，并且该函数在块级作用域之外不可引用。出于向后兼容的考虑，浏览器对该规定的实现非常有限。
		function f () {
			console.log("我是外部函数")
		}

		(function () {
			if(false){
				function f () {
					console.log("我是内部函数")
				}
			}

			f(); // Uncaught TypeError: f is not a function
		}())
	</script>

	<!-- notes: 
	1. - ES5不存在块级作用域，不允许在代码块中定义函数。因为不管代码块运不运行，函数都被提升到函数作用域或者全局作用域的顶部。
		 但是，浏览器没有遵守这个规定，为了兼容以前的旧代码，还是支持在代码块之中声明函数。

	   - ES6存在块级作用域，允许在代码块中定义函数。ES6 规定，块级作用域之中，函数声明语句的行为类似于let，在块级作用域之外不可引用。
		 但是，结果却并不如人意。
		 (From:http://es6.ruanyifeng.com/#docs/let):
		 如果改变了块级作用域内声明的函数的处理规则，显然会对老代码产生很大影响。为了减轻因此产生的不兼容问题，ES6在附录B里面规定，浏览器的实现可以不遵守上面的规定，有自己的行为方式。

		 - 允许在块级作用域内声明函数。
		 - 函数声明类似于var，即会提升到全局作用域或函数作用域的头部。
		 - 同时，函数声明还会提升到所在的块级作用域的头部。
		 注意，上面三条规则只对 ES6 的浏览器实现有效，其他环境的实现不用遵守，还是将块级作用域的函数声明当作let处理。

		 根据这三条规则，在浏览器的 ES6 环境中，块级作用域内声明的函数，行为类似于var声明的变量。
		 考虑到环境导致的行为差异太大，应该避免在块级作用域内声明函数。如果确实需要，也应该写成函数表达式，而不是函数声明语句。	   	  
	2. 关于块级作用域中函数声明仍然理解不够透彻！！！改天再研究...
	-->
	

</body>
</html>
