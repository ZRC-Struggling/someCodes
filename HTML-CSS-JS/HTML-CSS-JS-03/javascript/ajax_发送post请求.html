<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>
</head>

<body>
<form method="" action="">
<label for="txt">姓名：</label>
<input type="text" id="txt" onclick="showMeg(this.value)">
</form>
<div id="mydiv"></div>


<script type="text/javascript">
function showMeg(str){
  var xhr;
  if(str.length==0){
  	document.getElementById("mydiv").innerHTML="";
    return;
  }

  if (window.XMLHttpRequest){// 兼容IE7+, Firefox, Chrome, Opera, Safari
    xhr=new XMLHttpRequest();
    }
  else if(window.ActiveXObject) {//兼容IE6, IE5
    xhr=new ActiveXObject("Microsoft.XMLHTTP");
    }
  else{
  	alert("你的浏览器不支持Ajax!");
  	}
  	
  xhr.onreadystatechange=function(){
    if (xhr.readyState==4 && xhr.status==200)
      {
      document.getElementById("myDiv").innerHTML=xhr.responseText;
      }
    }
    
  xhr.open("POST","ajax_test.asp",true);
  //使用POST请求，并且要传送参数，必须先设置请求头部。
  xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");

  xhr.send("q="+str);
}
</script>
</body>
</html>
